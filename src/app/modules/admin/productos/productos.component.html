<div class="main-content">
  <div class="container-fluid card">
      <nav
        class="navbar navbar-light bg-light row card-header card-header-danger"
      >
        <span
          class="p"
        >
            Productos
        </span>
        <div>
          <button
            mat-mini-fab
            placeholder="guardar"
            *ngIf="disable && !data.id"
            (click)="saved()"
          >
            <i class="material-icons">save</i>
          </button>
          <button
            mat-mini-fab
            (click)="add()"
            placeholder="agregar"
          >
            <i
              class="material-icons"
              *ngIf="!disable"
            >
              add_circle_outline
            </i>
            <i
              class="material-icons"
              *ngIf="disable"
            >
              close
            </i>
          </button>
        </div>
      </nav>
      <br>
      <div
        fxLayout="row"
      >
        <div
          class="card-body"
          *ngIf="!disable"
        >
            <div class="table-responsive">
                <table class="table">
                    <thead class=" text-primary">
                      <th>
                        Opciones
                      </th>
                        <th>
                            Foto
                        </th>
                        <th>
                            Codigo
                        </th>
                        <th>
                            Producto
                        </th>
                        <th>
                            Tipo
                        </th>
                        <th>
                            Costo de Compra
                        </th>
                        <th>
                            Cantidad
                        </th>
                        <th>
                            Megusta
                        </th>
                    </thead>
                    <tbody>
                        <tr
                          *ngFor="let item of list"
                        >
                        <td>
                          <button
                            mat-mini-fab
                            placeholder="Ver"
                            [routerLink]="['../productos', item.id]"
                          >
                          <!-- (click)="add(item)" -->
                            <i
                              class="material-icons"
                            >
                              remove_red_eye
                            </i>
                          </button>
                        </td>
                            <td>
                              <img
                                class="md-avatar"
                                height="40px"
                                width="50px"
                                src="{{ item.foto }}"
                                alt="None"
                              >
                            </td>
                            <td>
                              {{ item.codigo }}
                            </td>
                            <td>
                                {{ item.titulo }}
                            </td>
                            <td>
                                {{ item.tipo }}
                            </td>
                            <td class="text-primary">
                                {{ item.costocompra}}
                            </td>
                            <td class="text-primary">
                                {{ item.cantidad}}
                            </td>
                            <td class="text-primary">
                                {{ item.megusta }}
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="card-body" *ngIf="disable">
          <div class="form-column">
            <div class="column" *ngIf="data.id">
              <div class="row justify-content-md-center">
                <img *ngIf="data.id" [src]="data.foto" alt="none" width="200px"
                  height="180px">
              </div>
              <div class="row justify-content-md-center p-1">
                <input type="file" [(ngModel)]="img" (blur)="datafiles($event)" accept="image/png, image/jpeg">
              </div>
              <div class="row justify-content-md-center">
                <button
                  (click)="file(false)"
                  *ngIf="carga"
                  class="btn btn-primary"
                >
                  <i class="fas fa-cloud-upload-alt fa-1x"></i>
                  Guardar Imagen
                </button>
              </div>
              <div  *ngIf="!carga" class="d-flex align-items-center">
                <strong>Loading...</strong>
                <div class="spinner-border ml-auto" role="status" aria-hidden="true"></div>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label for="formGroupExampleInput">Codigo del Producto</label>
                <input type="text"
                  (blur)="blur('codigo')"
                  class="form-control" placeholder="Codigo del Producto" [(ngModel)]="data.codigo">
              </div>
              <div class="form-group col-sm">
                <label for="formGroupExampleInput">Nombre del Producto</label>
                <input type="text"
                  (blur)="blur('titulo')"
                  class="form-control" placeholder="Nombre" [(ngModel)]="data.titulo">
              </div>
            </div>
            <div class="form-row">
              <div class="form-group col-sm">
                <label for="formGroupExampleInput">Categoria</label>
                <select class="custom-select"  (blur)="blur('categorias')" [(ngModel)]="data.categorias">
                  <option value="none">none</option>
                  <option
                    value="{{item.id}}"
                    *ngFor="let item of listcategoria"
                  >
                    {{ item.categoria }}
                  </option>
                </select>
              </div>
              <div class="form-group col-sm">
                <label for="formGroupExampleInput">Marca</label>
                <select class="custom-select"  (blur)="blur('marca')" [(ngModel)]="data.marca">
                  <option value="none">none</option>
                  <option
                    value="{{item.id}}"
                    *ngFor="let item of listmarca"
                  >
                    {{ item.categoria }}
                  </option>
                </select>
              </div>
              <div class="form-group col-sm">
                <label for="formGroupExampleInput">Cantidad</label>
                <input type="number"
                  (blur)="blur('cantidad')"
                  class="form-control" placeholder="Cantidad de Producto" [(ngModel)]="data.cantidad">
              </div>
              <div class="form-group col-sm">
                <label for="formGroupExampleInput">Stock</label>
                <input type="text"
                  (blur)="blur('stock')"
                  class="form-control" placeholder="Stock de Producto" [(ngModel)]="data.stock">
              </div>
            </div>
            <div class="form-row">
              <div class="form-group col-sm">
                <label for="formGroupExampleInput">Estado del Producto</label>
                <select class="custom-select"  (blur)="blur('estado')" [(ngModel)]="data.estado">
                  <option value="none">none</option>
                  <option value="nuevo">Nuevo</option>
                  <option value="usado">Usado</option>
                </select>
              </div>
              <div class="form-group col-sm">
                <label for="formGroupExampleInput">Opcion</label>
                <select class="custom-select"  (blur)="blur('opcion')" [(ngModel)]="data.opcion">
                  <option value="none">none</option>
                  <option value="activo">Activo</option>
                  <option value="inactivo">Inactivo</option>
                </select>
              </div>
              <div class="form-group col-sm">
                <label for="formGroupExampleInput">Costo de la Compra</label>
                <input type="number"
                  (blur)="blur('costocompra')"
                  class="form-control" placeholder="Costo de la Compra del Producto" [(ngModel)]="data.costocompra">
              </div>
              <div class="form-group col-sm">
                <label for="formGroupExampleInput">Costo de la Venta</label>
                <input type="number"
                  (blur)="blur('costoventa')"
                  class="form-control" placeholder="Costo de la Venta del Producto" [(ngModel)]="data.costoventa">
              </div>
              <div class="form-group col-sm">
                <label for="formGroupExampleInput">Costo de Promosion</label>
                <input type="number"
                  (blur)="blur('costoventa')"
                  class="form-control" placeholder="Costo de la Venta del Producto" [(ngModel)]="data.costopromosion">
              </div>
            </div>
            <div class="form-row">
              <div class="form-group col-sm">
                <label for="formGroupExampleInput">Talla del Producto</label>
                <select class="custom-select"  (blur)="blur('talla')" [(ngModel)]="data.talla">
                  <option value="none">none</option>
                    <option
                      value="{{item.id}}"
                      *ngFor="let item of listtalla"
                    >
                      {{ item.talla }}
                    </option>
                </select>
              </div>
              <div class="form-group col-sm">
                <label for="formGroupExampleInput">Color del Producto</label>
                <select class="custom-select"  (blur)="blur('color')" [(ngModel)]="data.color">
                  <option value="none">none</option>
                    <option
                      value="{{item.id}}"
                      *ngFor="let item of listcolor"
                    >
                      {{ item.color }}
                    </option>
                </select>
              </div>
              <div class="form-group col-sm">
                <label for="formGroupExampleInput">Fecha de Vencimiento</label>
                <input type="date"  placeholder="Fecha de Vencimiento" [(ngModel)]="data.fechavencimiento"
                (blur)="edit('fechavencimiento')">
              </div>
            </div>
            <div class="form-row">
              <div class="form-group col">
                <label for="formGroupExampleInput">Descripcin</label>
                <textarea class="form-control" (blur)="blur('descripcion')" rows="3" [(ngModel)]="data.descripcion"></textarea>
              </div>
            </div>
            <div class="column">
              <nav
                class="navbar navbar-light bg-light row card-header card-header-danger"
              >
                <span
                  class="p"
                >
                    Galeria
                </span>
                <div class="row">
                  <div class="row p-1">
                    <input
                      type="file"
                      [(ngModel)]="img"
                      (blur)="datafiles($event)"
                      accept="image/png, image/jpeg"
                    >
                  </div>
                  <div class="p-1">
                    <button
                      (click)="file(data)"
                      *ngIf="carga"
                      class="btn btn-primary"
                    >
                      <i class="fas fa-cloud-upload-alt fa-1x"></i>
                      Guardar Imagen
                    </button>
                  </div>
                  <div *ngIf="!carga" class="p-1">
                    <strong>Loading...</strong>
                    <div class="spinner-border ml-auto" role="status" aria-hidden="true"></div>
                  </div>
                </div>
              </nav>
              <div class="row p-3">
                <div
                  class="col-6 col-sm-4 col-lg-3" *ngFor="let pro of listgaleria"
                >
                    <div class="single-product-wrapper">
                        <div class="product-img">
                            <img src="{{ pro.foto || '/assets/img/product-img/product-4.jpg'}}" alt="none">
                            <img class="hover-img" src="{{ pro.foto || '/assets/img/product-img/product-5.jpg'}}" alt="none">
                        </div>
                        <div class="product-description">
                            <a href="single-product-details.html">
                                <h6>{{ pro.titulo }}</h6>
                            </a>
                            <div class="hover-content">
                                <div class="">
                                    <button type="button" (click)="data.foto = pro.foto; blur('foto')" class="btn btn-primary">Principal</button>
                                    <button type="button" (click)="deletefile(pro)" class="btn btn-primary">Eliminar</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
              </div>
            </div>
            <div class="column">
              <nav
                class="navbar navbar-light bg-light row card-header card-header-danger"
              >
                <span
                  class="p"
                >
                    Etiqueta
                </span>
              </nav>
            </div>
            <div class="">

            </div>
          </div>
        </div>
      </div>
  </div>
</div>
